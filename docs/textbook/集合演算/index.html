<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="https://osawa-koki.github.io/DB2023/Logo.png" type="image/x-icon" />
  
  <link rel="stylesheet" href="https://osawa-koki.github.io/DB2023/sass/style.min.dc0078058ce9074c96338ad888d8e91b59fba1e714614cf45118578944e151d7.css" />
  
  <link rel="stylesheet" href="https://osawa-koki.github.io/DB2023/sass/single.min.3b930d67d16a1c09a9dfba0df903c9a279dfcadbd9d8c4479def4c7a14e91547.css" />
  
  <link rel="stylesheet" href="https://osawa-koki.github.io/DB2023/sass/content.min.29f09606f5140407d848c87a91f73509241b381546612af92f28f53e2fd2de65.css" />
  <link rel="stylesheet" href="https://osawa-koki.github.io/DB2023/bootstrap-5.0.2-dist/css/bootstrap.min.css" />
  <title>集合演算 | データベーススペシャリスト試験対策</title>
</head>
<body>
  <header>
    <a href="https://osawa-koki.github.io/DB2023/"><img id="LogoImage" src="https://osawa-koki.github.io/DB2023/Logo.png" alt="Logo" /></a>
  </header>
  <main>

<div id="Single">
  <div id="MainDiv">
    <div id="content-header">
      <div id="content-title">集合演算</div>
      <div id="content-description">リレーショナルモデルの基本となる論理演算について学びます♪</div>
      <div id="content-date">2022.12.25</div>
      <div id="content-categories">
        
          <div class="category">DB2023</div>
        
          <div class="category">教科書</div>
        
      </div>
      <div id="content-tags">
        
          <div class="tag">論理演算</div>
        
          <div class="tag">リレーショナルモデル</div>
        
      </div>
    </div>
    <div id="MainBody">
      <div id="content">
        <h2 id="集合演算">集合演算</h2>
<p>集合に対して論理的な法則を適用して新たな集合を求める演算を言います。<br>
集合演算には以下の種類があります。</p>
<ul>
<li>和</li>
<li>差</li>
<li>直積</li>
<li>積</li>
<li>商</li>
</ul>
<h2 id="和">和</h2>
<p>OR演算を意味し、和両立の場合にのみ成立する演算です。<br>
ある集合(R)ともう片方の集合(S)の2つに含まれている要素からなる集合を求めます。</p>
<p><img src="../img/union.png" alt="和集合"></p>
<blockquote>
<p><strong>和両立</strong><br>
演算対象の2つの集合の構造が完全に一致していることを言います。</p>
</blockquote>
<p>また、和両立に関して、「属性の数」と「対応する属性のドメイン」が同じであるという内容が平成28年度の午前Ⅱ問15で出題されています。</p>
<p>UNION演算子を使用します。</p>
<p>以下の例では第一世代と第二世代のポケモンを格納するテーブルから、第一世代と第二世代のポケモンの集合を求めています。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">UNION</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation2;
</span></span></code></pre></div><p>和両立でないケースとは以下のような場合です。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">UNION</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation2;
</span></span></code></pre></div><p>上の例では構造が異なっているため、演算に失敗します。<br>
簡単にいうと、全てのカラムが一致していないと成立しません。</p>
<hr>
<p>UNION演算子は和演算によって発生した重複を自動で取り除きますが、そのまま出力したい場合にはUNION ALL演算子を使用します。<br>
もっとも、リレーショナルモデルの性格上、レコードが重複することはあり得ないので、使用する機会が少ないですが、パフォーマンスの観点から使用することがあります。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation2;
</span></span></code></pre></div><h2 id="差">差</h2>
<p>ある集合(R)に属して、もう片方の集合(S)に属さない要素からなる集合を求める演算です。</p>
<p><img src="../img/difference.png" alt="和集合"></p>
<p>EXCEPT演算子を使用します。</p>
<p>以下の例では第一世代に含まれて、第二世代に含まれていないポケモンの集合を求めています。<br>
そんなポケモンはいませんが、、、</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">EXCEPT</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation2;
</span></span></code></pre></div><p>EXCEPT句を使用しなくても、NOT EXISTS句やNOT IN句などを使用して実現できます。</p>
<h2 id="直積">直積</h2>
<p>直積とは集合Rと集合Sの全ての組み合わせからなる集合を求めることを言います。<br>
クロス結合が該当します。</p>
<p>また、直積と選択によって等結合演算を表すことができる内容が平成30年の午前Ⅱの問9で出題されています。</p>
<blockquote>
<p><strong>等結合演算</strong><br>
例えば、比較演算子が&rsquo;=&lsquo;であったなら、属性の値が同じタプルどうしが結合されます。  そうすると結合されたテーブルには同じ属性の値を持つタプルが出来ます。  このような結合演算を等結合演算といいます。<br>
<a href="http://ext-web.edu.sgu.ac.jp/HIKO/Prog03/SenpaiKyozai/shiohara/relational_algebra.html">DELPHI5</a>より引用。</p>
</blockquote>
<h2 id="積">積</h2>
<p>集合Rと集合Sのどちらにも属する要素からなる集合を求める演算です。<br>
AND演算を意味します。</p>
<p><img src="../img/intersection.png" alt="和集合"></p>
<p>INTERSECT演算子を使用します。</p>
<p>以下の例では第一世代と第二世代どちらにも属するポケモンの集合を求めています。<br>
そんなポケモンはいませんが、、、</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INTERSECT</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> number, name, type1, type2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> generation2;
</span></span></code></pre></div><h2 id="商">商</h2>
<p>リレーションR・S・Tの間で直積演算<code>S × T = R</code>が成立する場合に、RとSの商演算<code>R ÷ S = T</code>が成立します。<br>
直積演算を「掛け算」とすると、商演算は「割り算」となります。</p>

      </div>
    </div>
  </div>





  <div id="SubDiv">
    <div id="Menu">
      <div class="title">教科書</div>
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e3%82%a4%e3%83%b3%e3%83%87%e3%83%83%e3%82%af%e3%82%b9">インデックス</a>
        
        
        
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e3%83%87%e3%83%bc%e3%82%bf%e3%83%99%e3%83%bc%e3%82%b9%e5%9f%ba%e7%a4%8e">データベース基礎</a>
        
        
        
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/sql%e3%81%ae%e7%a8%ae%e9%a1%9e">SQLの種類</a>
        
        
        
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e3%83%87%e3%83%bc%e3%82%bf%e6%93%8d%e4%bd%9c%e8%a8%80%e8%aa%9e">データ操作言語</a>
        
        
        
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%ae%e7%b5%90%e5%90%88">テーブルの結合</a>
        
        
        
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e9%9b%86%e5%90%88%e6%bc%94%e7%ae%97" class="active">集合演算</a>
          
          
        
        
        
      
        
        
        
          
          
          
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e5%89%af%e5%95%8f%e3%81%84%e5%90%88%e3%82%8f%e3%81%9b">副問い合わせ</a>
        
        
        
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e3%83%87%e3%83%bc%e3%82%bf%e5%ae%9a%e7%be%a9%e8%a8%80%e8%aa%9e">データ定義言語</a>
        
        
        
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e3%83%87%e3%83%bc%e3%82%bf%e5%88%b6%e5%be%a1%e8%a8%80%e8%aa%9e">データ制御言語</a>
        
        
        
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/textbook/%e5%9f%8b%e8%be%bc%e3%81%bf%e5%9e%8bsql">埋込み型SQL</a>
        
        
        
      
      
      
      
      <div class="title">カラム</div>
      
        
        
        
        
        
        
        
        
          <a href="https://osawa-koki.github.io/DB2023/column/%e5%87%ba%e9%a1%8c%e5%82%be%e5%90%91">出題傾向</a>
        
        
        
      
    </div>
  </div>
</div>
<div>
  <div id="ButtonContainer">
    
      <a class="btn btn-outline-success" href="https://osawa-koki.github.io/DB2023/textbook/%e3%83%86%e3%83%bc%e3%83%96%e3%83%ab%e3%81%ae%e7%b5%90%e5%90%88" id="PrevButton">前へ</a>
    
    
      <a class="btn btn-outline-primary" href="https://osawa-koki.github.io/DB2023/textbook/%e5%89%af%e5%95%8f%e3%81%84%e5%90%88%e3%82%8f%e3%81%9b" id="NextButton">次へ</a>
    
  </div>
</div>
  </main>
<footer>
</footer>
</body>
</html>

